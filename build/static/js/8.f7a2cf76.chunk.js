(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[8],{69:function(e,t,n){e.exports={reviews:"Reviews_reviews__H8KZ-",user:"Reviews_user__3TC9s",date:"Reviews_date__1CaXN"}},78:function(e,t,n){"use strict";n.r(t);var c=n(6),a=n(1),s=n(3),i=n(9),r=n(28),o=n(50),j=n(16),d=n(56),l=n(27),b=n(57),u=n.n(b),m=n(62),O=n(70),h=n(52),x=n(53),v=n.n(x),f=n(55),p=n.n(f),g=n(51),w=n(54),N=n(63),y=n(20),C=n(21),S=n(61),R=n.n(S),F=n(0),k=function(e){return""!==e},_=function(e){var t=Array(5).fill(0),n=Object(a.useState)(0),s=Object(c.a)(n,2),i=s[0],r=s[1],o=Object(a.useState)(void 0),j=Object(c.a)(o,2),d=j[0],l=j[1],b=function(){l(void 0)},u=Object(y.a)(k),m=u.value,O=u.isValid,h=u.hasError,x=u.valueChangeHandler,v=u.inputBlurHandler,f=u.reset,p=Object(y.a)(k),w=p.value,S=p.valueChangeHandler,_=p.inputBlurHandler,L=p.reset,M=!1;O&&(M=!0);return Object(F.jsxs)("form",{className:R.a.form,onSubmit:function(t){if(t.preventDefault(),M){var n=new Date;e.onConfirm({name:m,comment:w,rating:i,date:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()})}},children:[Object(F.jsx)(C.a,{label:"Name",id:"name",type:"text",value:m,onChange:x,onBlur:v,errorStyling:h}),h&&Object(F.jsx)("p",{className:R.a.invalid,children:"Name can not be empty!"}),Object(F.jsx)("p",{children:Object(F.jsx)("strong",{children:"Rating"})}),t.map((function(e,t){return Object(F.jsx)(N.a,{size:"1.5rem",style:{marginRight:"5px",marginTop:"-0.3rem",marginBottom:"0.7rem",cursor:"pointer"},color:(d||i)>t?"orange":"grey",onClick:function(){r(t+1)},onMouseOver:function(){l(t+1)},onMouseLeave:b},t)})),Object(F.jsx)(C.a,{label:"Comment",id:"comment",type:"textarea",value:w,onChange:S,onBlur:_}),Object(F.jsxs)("div",{className:R.a.actions,children:[Object(F.jsx)(g.a,{buttonStyle:"button--reset",onClick:function(){f(),r(0),L()},children:"Reset"}),Object(F.jsx)(g.a,{buttonStyle:"button--submit",type:"submit",disabled:!M,children:"Submit Feedback"})]})]})},L=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),i=n[0],r=n[1],j=Object(a.useState)(!0),d=Object(c.a)(j,2),b=d[0],u=d[1],m=Object(s.i)().dishId,O=Object(o.a)(),x=O.isLoading,f=O.error,N=O.sendRequest,y=function(){u(!1),r(!1),e.reviewModalState(!1)},C=function(t,n){r(!0);var c={id:n.name,name:t.name,comment:t.comment,rating:t.rating,date:t.date};e.onAddNewReview(c)},S=function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/reviews/".concat(m,".json"),method:"POST",headers:{"Content-Type":"application/json"},body:{name:t.name,description:t.comment,rating:t.rating,date:t.date}},C.bind(null,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(F.jsxs)(a.Fragment,{children:[Object(F.jsx)(_,{onConfirm:S}),Object(F.jsx)("div",{className:p.a.actions,children:Object(F.jsx)(g.a,{buttonStyle:"button--cancel",onClick:y,children:"Close"})})]}),k=Object(F.jsx)("div",{className:"centered",children:Object(F.jsx)(l.a,{})}),L=Object(F.jsxs)(a.Fragment,{children:[Object(F.jsx)("p",{children:"A New Review is added successfully! Reload the page to see changes!"}),Object(F.jsx)("div",{className:p.a.actions,children:Object(F.jsx)(g.a,{buttonStyle:"button--cancel",onClick:y,children:"Close"})})]}),M=Object(F.jsx)("div",{className:p.a.actions,children:Object(F.jsx)("p",{className:p.a.invalid,children:f})});return Object(F.jsx)(a.Fragment,{children:b&&Object(F.jsxs)(w.a,{onClose:y,children:[!x&&!i&&R,x&&k,!x&&i&&L,f&&M]})})},M=n(69),D=n.n(M),H=function(e){var t=e.review,n=Array(5).fill(0),c=function(e){var t=new Date(e);return{month:t.toLocaleString("en-US",{month:"long"}),day:t.toLocaleString("en-US",{day:"2-digit"}),year:t.getFullYear()}}(t.date);return Object(F.jsxs)("li",{children:[Object(F.jsxs)("div",{className:D.a.user,children:[Object(F.jsx)(N.c,{size:"1.7rem",color:"grey"}),Object(F.jsx)("h5",{children:t.name})]}),n.map((function(e,n){return Object(F.jsx)(N.a,{color:t.rating>n?"orange":"grey"},n)})),Object(F.jsxs)("div",{className:D.a.date,children:["Reviewd on ",c.day," ",c.month," ",c.year]}),Object(F.jsx)("p",{children:t.comment})]})},A=function(e){return e.reviews.map((function(e){return Object(F.jsx)(H,{review:e},e.id)}))},B=function(){var e,t=Object(a.useState)([]),n=Object(c.a)(t,2),i=n[0],r=n[1],j=Object(a.useState)(!1),d=Object(c.a)(j,2),b=d[0],u=d[1],m=Object(s.i)().dishId,O=Object(o.a)(),h=O.isLoading,x=O.error,v=O.sendRequest;if(Object(a.useEffect)((function(){v({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/reviews/".concat(m,".json")},(function(e){var t=[];for(var n in e)t.push({id:n,name:e[n].name,rating:e[n].rating,date:e[n].date,comment:e[n].comment});r(t)}))}),[v,m]),h)return Object(F.jsx)("div",{className:"centered",children:Object(F.jsx)(l.a,{})});if(x)return Object(F.jsx)("div",{className:"centered",children:x});0===i.length&&(e=Object(F.jsx)("p",{className:"centered",children:"No reviews were given!"})),i.length>0&&(e=Object(F.jsx)(A,{reviews:i}));return Object(F.jsxs)(a.Fragment,{children:[b&&Object(F.jsx)(L,{reviewModalState:u,onAddNewReview:function(e){r((function(t){return t.concat(e)}))}}),Object(F.jsxs)("section",{className:D.a.reviews,children:[Object(F.jsx)("div",{className:"centered",children:Object(F.jsx)("button",{className:"uni-button",type:"button",onClick:function(){u(!0)},children:"Give Feedback"})}),Object(F.jsx)("ul",{children:e})]})]})};t.default=function(e){var t=Object(a.useState)({}),n=Object(c.a)(t,2),b=n[0],h=n[1],x=Object(a.useContext)(j.a),v=Object(s.j)(),f=Object(s.i)().dishId,p=Object(o.a)(),g=p.isLoading,w=p.error,N=p.sendRequest;return Object(a.useEffect)((function(){N({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes/".concat(f,".json")},(function(e){h(e)}))}),[N,f]),g?Object(F.jsx)("section",{className:u.a.dishesLoading,children:Object(F.jsx)(l.a,{})}):w?Object(F.jsx)("section",{className:u.a.fetchDishesError,children:Object(F.jsx)("p",{children:w})}):Object(F.jsxs)(a.Fragment,{children:[Object(F.jsxs)(r.a,{children:[Object(F.jsx)("title",{children:"Food Mensa - Delicious Meal"}),Object(F.jsx)("meta",{name:"description",content:"Food Mensa. Order your meal and enjoy delicious food."})]}),x.cartIsVisible&&Object(F.jsx)(O.a,{hideCart:e.onHideCart}),Object(F.jsxs)("section",{className:u.a.dishes,children:[Object(F.jsx)(d.a,{children:Object(F.jsx)(m.a,{id:f,name:b.name,description:b.description,price:b.price})}),Object(F.jsx)(s.b,{path:v.path,exact:!0,children:Object(F.jsx)("div",{className:"centered",children:Object(F.jsx)(i.b,{className:"btn--flat",to:"".concat(v.url,"/reviews"),children:"Load Reviews"})})}),Object(F.jsx)(s.b,{path:"".concat(v.path,"/reviews"),children:Object(F.jsx)(B,{})})]})]})}}}]);
//# sourceMappingURL=8.f7a2cf76.chunk.js.map