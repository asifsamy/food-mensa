(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[1],{50:function(e,t,n){"use strict";var a=n(52),c=n(6),i=n(53),s=n.n(i),r=n(1);t.a=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(null),l=Object(c.a)(o,2),d=l[0],u=l[1],j=Object(r.useCallback)(function(){var e=Object(a.a)(s.a.mark((function e(t,n){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),u(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"GET",headers:t.headers?t.headers:{},body:t.body?JSON.stringify(t.body):null});case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,a.json();case 10:c=e.sent,n(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),u(e.t0.message||"Something went wrong!");case 17:i(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{isLoading:n,error:d,sendRequest:j}}},51:function(e,t,n){"use strict";var a=n(58),c=n.n(a),i=n(0);t.a=function(e){var t=["button--submit","button--cancel","button--reset","button--edit","button--delete"],n=t.includes(e.buttonStyle)?e.buttonStyle:t[0];return Object(i.jsx)("button",{className:"".concat(c.a.button," ").concat(c.a[n]),type:e.type||"button",onClick:e.onClick,disabled:e.disabled||!1,children:e.children})}},54:function(e,t,n){"use strict";var a=n(1),c=n(65),i=n.n(c),s=n(29),r=n.n(s),o=n(0),l=function(e){return Object(o.jsx)("div",{className:i.a.backdrop,onClick:e.onClose})},d=function(e){return Object(o.jsx)("div",{className:i.a.modal,children:Object(o.jsx)("div",{className:i.a.content,children:e.children})})},u=document.getElementById("overlays");t.a=function(e){return Object(o.jsxs)(a.Fragment,{children:[r.a.createPortal(Object(o.jsx)(l,{onClose:e.onClose}),u),r.a.createPortal(Object(o.jsx)(d,{children:e.children}),u)]})}},55:function(e,t,n){e.exports={actions:"DishItemActions_actions__2WXUm",invalid:"DishItemActions_invalid__3QL1c"}},56:function(e,t,n){"use strict";var a=n(59),c=n.n(a),i=n(0);t.a=function(e){return Object(i.jsx)("div",{className:c.a.card,children:e.children})}},57:function(e,t,n){e.exports={dishes:"AvailableDishes_dishes__Csb6N","dishes-appear":"AvailableDishes_dishes-appear__3Pufg",dishesLoading:"AvailableDishes_dishesLoading__c-p27",fetchDishesError:"AvailableDishes_fetchDishesError__svuCw"}},58:function(e,t,n){e.exports={button:"Button_button__2jVP6","button--cancel":"Button_button--cancel__lkgVB","button--reset":"Button_button--reset__1xpYZ","button--submit":"Button_button--submit__c9QIc","button--edit":"Button_button--edit__2Td8g","button--delete":"Button_button--delete__1_Zsw"}},59:function(e,t,n){e.exports={card:"Card_card__YEWXs"}},60:function(e,t,n){"use strict";var a=n(20),c=n(51),i=n(21),s=n(61),r=n.n(s),o=n(0),l=function(e){return""!==e},d=function(e){return e>0};t.a=function(e){var t=Object(a.a)(l,e.item?e.item.name:""),n=t.value,s=t.isValid,u=t.hasError,j=t.valueChangeHandler,b=t.inputBlurHandler,m=t.reset,h=Object(a.a)(l,e.item?e.item.description:""),p=h.value,O=h.isValid,x=h.hasError,f=h.valueChangeHandler,v=h.inputBlurHandler,_=h.reset,C=Object(a.a)(d,e.item?e.item.price:""),g=C.value,y=C.isValid,N=C.hasError,S=C.valueChangeHandler,k=C.inputBlurHandler,I=C.reset,D=!1;s&&O&&y&&(D=!0);return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{className:r.a.form,onSubmit:function(t){t.preventDefault(),D&&e.onConfirm({name:n,description:p,price:g})},children:[Object(o.jsx)(i.a,{label:"Name",id:"name",type:"text",value:n,onChange:j,onBlur:b,errorStyling:u}),u&&Object(o.jsx)("p",{className:r.a.invalid,children:"Please enter a valid name!"}),Object(o.jsx)(i.a,{label:"Description",id:"description",type:"textarea",value:p,onChange:f,onBlur:v,errorStyling:x}),x&&Object(o.jsx)("p",{className:r.a.invalid,children:"Please enter a valid name!"}),Object(o.jsx)(i.a,{label:"Price",id:"price",type:"number",min:"1",step:"any",value:g,onChange:S,onBlur:k,errorStyling:N}),N&&Object(o.jsx)("p",{className:r.a.invalid,children:"Please enter a valid name!"}),Object(o.jsxs)("div",{className:r.a.actions,children:[Object(o.jsx)(c.a,{buttonStyle:"button--reset",onClick:function(){_(),m(),I()},children:"Reset"}),Object(o.jsx)(c.a,{buttonStyle:"button--edit",type:"submit",disabled:!D,children:e.item?"Update":"Add New Dish"})]})]})})}},61:function(e,t,n){e.exports={form:"NewDishItemForm_form__W9czV",actions:"NewDishItemForm_actions__1xZvE",invalid:"NewDishItemForm_invalid__3k6oU"}},62:function(e,t,n){"use strict";var a=n(6),c=n(1),i=n(3),s=n(9),r=n(16),o=n(50),l=n(63),d=n(0),u=function(e){switch(e){case 0:return Object(d.jsx)(l.a,{color:"grey"});case 50:return Object(d.jsx)(l.b,{color:"orange"});case 100:return Object(d.jsx)(l.a,{color:"orange"});default:return}},j=function(e){for(var t=[],n=parseFloat(e).toString().split("."),c=Object(a.a)(n,2),i=c[0],s=c[1],r=0;r<i;r++)t.push(100);s&&t.push(50);for(var o=i;o<(s?4:5);o++)t.push(0);return t},b=function(e){var t=e.ratingValue;return Object(d.jsx)(c.Fragment,{children:j(t).map((function(e,t){return Object(d.jsx)("span",{children:u(e)},t)}))})},m=function(e){var t=e.dishItemId,n=Object(c.useState)(0),i=Object(a.a)(n,2),s=i[0],r=i[1],l=Object(o.a)().sendRequest;return Object(c.useEffect)((function(){l({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/reviews/".concat(t,".json")},(function(e){var t=[],n=0;for(var a in e)t.push(e[a].rating),n+=e[a].rating;if(t.length>0){var c=function(e){var t=Math.abs(e)-Math.floor(e);return t>=0&&t<.26?Math.floor(e):t>.75&&t<1?Math.ceil(e):Math.floor(e)+.5}(Number(n/t.length).toFixed(2));r(c)}}))}),[t,l]),Object(d.jsx)(b,{ratingValue:s})},h=n(66),p=n.n(h),O=n(52),x=n(53),f=n.n(x),v=n(51),_=n(27),C=n(54),g=n(55),y=n.n(g),N=function(e){var t=Object(c.useState)(!0),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useState)(!1),l=Object(a.a)(r,2),u=l[0],j=l[1],b=Object(o.a)(),m=b.isLoading,h=b.error,p=b.sendRequest,O=function(){s(!1),j(!1),e.callDeleteState(!1)},x=function(){j(!0),e.deleteById(e.id)},f=Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)("p",{children:"Are you sure! You want to delete this dish item!"}),Object(d.jsxs)("div",{className:y.a.actions,children:[Object(d.jsx)(v.a,{buttonStyle:"button--cancel",onClick:O,children:"Cancel"}),Object(d.jsx)(v.a,{buttonStyle:"button--delete",onClick:function(){p({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes/".concat(e.id,".json"),method:"DELETE"},x)},children:"Confirm"})]})]}),g=Object(d.jsx)("div",{className:"centered",children:Object(d.jsx)(_.a,{})}),N=Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)("p",{children:"The Dish item has been deleted successfully!Reload the page to see the changes!"}),Object(d.jsx)("div",{className:y.a.actions,children:Object(d.jsx)(v.a,{buttonStyle:"button--cancel",onClick:O,children:"Close"})})]}),S=Object(d.jsx)("div",{className:y.a.actions,children:Object(d.jsx)("p",{className:y.a.invalid,children:h})});return Object(d.jsx)("div",{children:i&&Object(d.jsxs)(C.a,{onClose:O,children:[!u&&!m&&!h&&f,m&&g,u&&!m&&N,h&&S]})})},S=n(60),k=function(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useState)(!1),l=Object(a.a)(r,2),u=l[0],j=l[1],b=Object(c.useState)(!1),m=Object(a.a)(b,2),h=m[0],p=m[1],x=Object(o.a)(),g=x.isLoading,k=x.error,I=x.sendRequest,D=function(){s(!1),j(!1)},w=function(t){j(!0),e.onUpdateItem({id:e.item.id,name:t.name,description:t.description,price:t.price})},B=function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes/".concat(e.item.id,".json"),method:"PUT",headers:{"Content-Type":"application/json"},body:{name:n.name,description:n.description,price:+n.price}},w.bind(null,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)(S.a,{item:e.item,onConfirm:B}),Object(d.jsx)("div",{className:y.a.actions,children:Object(d.jsx)(v.a,{buttonStyle:"button--cancel",onClick:D,children:"Cancel"})})]}),E=Object(d.jsx)("div",{className:"centered",children:Object(d.jsx)(_.a,{})}),H=Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)("p",{children:"The Dish item is updated successfully! Reload the page to see changes!"}),Object(d.jsx)("div",{className:y.a.actions,children:Object(d.jsx)(v.a,{buttonStyle:"button--cancel",onClick:D,children:"Close"})})]}),P=Object(d.jsx)("div",{className:y.a.actions,children:Object(d.jsx)("p",{className:y.a.invalid,children:k})}),A=Object(d.jsx)(N,{id:e.item.id,callDeleteState:p,deleteById:e.onDelete});return Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)(v.a,{buttonStyle:"button--edit",onClick:function(){s(!0)},children:"Update"}),Object(d.jsx)(v.a,{buttonStyle:"button--delete",onClick:function(){p(!0)},children:"Delete"}),i&&Object(d.jsxs)(C.a,{onClose:D,children:[!g&&!u&&F,g&&E,!g&&u&&H,k&&P]}),h&&A]})},I=n(67),D=n.n(I),w=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(!0),i=Object(a.a)(n,2),s=i[0],r=i[1];return Object(d.jsxs)("form",{className:D.a.form,onSubmit:function(n){n.preventDefault();var a=t.current.value,c=+a;0===a.trim().length||c<1||c>5?r(!1):e.onAddToCart(c)},children:[Object(d.jsxs)("div",{className:D.a.input,children:[Object(d.jsx)("label",{htmlFor:e.id,children:"Amount"}),Object(d.jsx)("input",{id:"amount_".concat(e.id),ref:t,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"})]}),Object(d.jsx)(v.a,{type:"submit",children:"+ Add"}),!s&&Object(d.jsx)("p",{children:"Please enter a valid amount(1-5)"})]})};t.a=function(e){var t=Object(c.useState)({id:e.id,name:e.name,price:e.price,description:e.description}),n=Object(a.a)(t,2),o=n[0],l=n[1],u=Object(i.h)(),j=/admin+\W*/.test(u.pathname),b="\u20ac".concat(Number(o.price).toFixed(2)),h=Object(c.useContext)(r.a),O={id:o.id,name:o.name,price:o.price,description:o.description};return Object(d.jsxs)("li",{className:p.a.dish,children:[Object(d.jsxs)("div",{children:[j?Object(d.jsx)("h3",{children:o.name}):Object(d.jsx)(s.b,{to:"/dishes/".concat(e.id),children:Object(d.jsx)("h3",{children:o.name})}),Object(d.jsx)("div",{className:p.a.description,children:o.description}),Object(d.jsx)("div",{className:p.a.price,children:b}),Object(d.jsx)(m,{dishItemId:e.id})]}),Object(d.jsxs)("div",{children:[j&&Object(d.jsx)(k,{item:O,onUpdateItem:function(e){l(e)},onDelete:e.onDeleteItem}),!j&&Object(d.jsx)(w,{id:e.id,onAddToCart:function(t){h.addItem({id:e.id,name:e.name,amount:t,price:e.price})}})]})]})}},65:function(e,t,n){e.exports={backdrop:"Modal_backdrop__HtLmJ",modal:"Modal_modal__2L3_b","slide-down":"Modal_slide-down__19PJI",content:"Modal_content__G3IwK"}},66:function(e,t,n){e.exports={dish:"DishItem_dish__2Aya-",description:"DishItem_description__2dLwp",price:"DishItem_price__HVKAF"}},67:function(e,t,n){e.exports={form:"DishItemForm_form__1ySFI",input:"DishItemForm_input__HEXzg"}},70:function(e,t,n){"use strict";var a=n(52),c=n(14),i=n(6),s=n(53),r=n.n(s),o=n(1),l=n.n(o),d=n(50),u=n(16),j=n(51),b=n(27),m=n(54),h=n(71),p=n.n(h),O=n(72),x=n.n(O),f=n(0),v=function(e){var t="\u20ac".concat(Number(e.price).toFixed(2));return Object(f.jsxs)("li",{className:x.a["cart-item"],children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:e.name}),Object(f.jsxs)("div",{className:x.a.summary,children:[Object(f.jsx)("span",{className:x.a.price,children:t}),Object(f.jsxs)("span",{className:x.a.amount,children:["x ",e.amount]})]})]}),Object(f.jsxs)("div",{className:x.a.actions,children:[Object(f.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(f.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},_=n(20),C=n(21),g=n(73),y=n.n(g),N=function(e){return""!==e.trim()},S=function(e){return 5===e.trim().length},k=function(e){var t=Object(o.useContext)(u.a),n=Object(_.a)(N),a=n.value,c=n.isValid,i=n.hasError,s=n.valueChangeHandler,r=n.inputBlurHandler,l=Object(_.a)(N),d=l.value,b=l.isValid,m=l.hasError,h=l.valueChangeHandler,p=l.inputBlurHandler,O=Object(_.a)(N),x=O.value,v=O.isValid,g=O.hasError,k=O.valueChangeHandler,I=O.inputBlurHandler,D=Object(_.a)(S),w=D.value,B=D.isValid,F=D.hasError,E=D.valueChangeHandler,H=D.inputBlurHandler,P=!1;c&&b&&v&&B&&(P=!0);return Object(f.jsxs)("form",{className:y.a.form,onSubmit:function(t){t.preventDefault(),P&&e.onConfirm({name:a,street:d,city:x,postalCode:w})},children:[Object(f.jsx)(C.a,{id:"name",type:"text",label:"Enter Name",value:a,onChange:s,onBlur:r,errorStyling:i}),i&&Object(f.jsx)("p",{className:y.a.invalid,children:"Please enter a valid name!"}),Object(f.jsx)(C.a,{id:"street",type:"text",label:"Street and House Number",value:d,onChange:h,onBlur:p,errorStyling:m}),m&&Object(f.jsx)("p",{className:y.a.invalid,children:"Please enter a street and house number!"}),Object(f.jsx)(C.a,{type:"text",id:"postal",label:"Postal Code",value:w,onChange:E,onBlur:H,errorStyling:F}),F&&Object(f.jsx)("p",{className:y.a.invalid,children:"Please enter a 5 digit postal code!"}),Object(f.jsx)(C.a,{type:"text",id:"city",label:"City",value:x,onChange:k,onBlur:I,errorStyling:g}),g&&Object(f.jsx)("p",{className:y.a.invalid,children:"Please enter a valid city!"}),Object(f.jsxs)("div",{className:y.a.actions,children:[Object(f.jsx)(j.a,{buttonStyle:"button--cancel",onClick:function(){t.cartVisibility()},children:"Cancel"}),Object(f.jsx)(j.a,{type:"submit",disabled:!P,children:"Confirm"})]})]})};t.a=function(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),s=n[0],h=n[1],O=Object(o.useState)(!1),x=Object(i.a)(O,2),_=x[0],C=x[1],g=Object(o.useContext)(u.a),y=Object(d.a)(),N=y.isLoading,S=y.error,I=y.sendRequest,D="\u20ac".concat(g.totalAmount.toFixed(2)),w=g.items.length>0,B=function(e){g.removeItem(e)},F=function(e){g.addItem(Object(c.a)(Object(c.a)({},e),{},{amount:1}))},E=function(){g.cartVisibility()},H=Object(f.jsx)("ul",{className:p.a["cart-items"],children:g.items.map((function(e){return Object(f.jsx)(v,{name:e.name,amount:e.amount,price:e.price,onRemove:B.bind(null,e.id),onAdd:F.bind(null,e)},e.id)}))}),P=Object(f.jsxs)("div",{className:p.a.actions,children:[Object(f.jsx)(j.a,{buttonStyle:"button--cancel",onClick:E,children:"Close"}),w&&Object(f.jsx)(j.a,{onClick:function(){h(!0)},children:"Order"})]}),A=function(e){e.name&&(C(!0),console.log(e),g.clearCart())},V=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I({url:"https://mensa-app-80da4-default-rtdb.firebaseio.com/orders.json",method:"POST",headers:{"Content-Type":"application/json"},body:{user:t,dishItems:g.items,status:"pending"}},A.bind(null,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=Object(f.jsxs)(l.a.Fragment,{children:[H,Object(f.jsxs)("div",{className:p.a.total,children:[Object(f.jsx)("span",{children:"Total Amount"}),Object(f.jsx)("span",{children:D})]}),s&&Object(f.jsx)(k,{onConfirm:V}),!s&&P]}),R=Object(f.jsx)("div",{className:"centered",children:Object(f.jsx)(b.a,{})}),T=Object(f.jsxs)(l.a.Fragment,{children:[Object(f.jsx)("p",{children:"Yor order is successful! Your meal will be delivered within 30 minutes"}),Object(f.jsx)("div",{className:p.a.actions,children:Object(f.jsx)(j.a,{buttonStyle:"button--cancel",onClick:E,children:"Close"})})]}),M=Object(f.jsx)(l.a.Fragment,{children:Object(f.jsxs)("div",{className:p.a.actions,children:[Object(f.jsx)("p",{children:S}),Object(f.jsx)(j.a,{buttonStyle:"button--cancel",onClick:E,children:"Close"})]})});return Object(f.jsxs)(m.a,{onClose:E,children:[!N&&!_&&L,N&&R,!N&&_&&T,S&&M]})}},71:function(e,t,n){e.exports={"cart-items":"Cart_cart-items__1rUEe",total:"Cart_total__3frEX",actions:"Cart_actions__2Zo41"}},72:function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__29L9L",summary:"CartItem_summary__3s_N6",price:"CartItem_price__PYKFP",amount:"CartItem_amount__1ELSD",actions:"CartItem_actions__3zLD1"}},73:function(e,t,n){e.exports={form:"Checkout_form__3KU0H",actions:"Checkout_actions__3NBbt",invalid:"Checkout_invalid__1GBqN"}}}]);
//# sourceMappingURL=1.dc62cd82.chunk.js.map