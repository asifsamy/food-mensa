{"version":3,"sources":["hooks/use-http.js","components/UI/FormFields/Button.js","components/UI/Modal.js","components/Dishes/DishItem/DishItemActions.module.css","components/UI/Card.js","components/Dishes/AvailableDishes.module.css","components/UI/FormFields/Button.module.css","components/UI/Card.module.css","components/Dishes/DishItem/NewDishItemForm.js","components/Dishes/DishItem/NewDishItemForm.module.css","components/Reviews/RatingLogic.js","components/Reviews/Rating.js","components/Dishes/DishItem/DeleteDishItem.js","components/Dishes/DishItem/DishItemActions.js","components/Dishes/DishItem/DishItemForm.js","components/Dishes/DishItem/DishItem.js","components/UI/Modal.module.css","components/Dishes/DishItem/DishItem.module.css","components/Dishes/DishItem/DishItemForm.module.css","components/Dishes/DishItem/NewDishItem.js","components/Dishes/AvailableDishes.js","pages/admin/AllDishes.js"],"names":["useHttp","useState","isLoading","setIsLoading","error","setError","sendRequest","useCallback","requestConfig","applyData","a","fetch","url","method","headers","body","JSON","stringify","response","ok","Error","json","data","message","Button","props","STYLES","buttonStyle","includes","className","classes","button","type","onClick","disabled","children","Backdrop","backdrop","onClose","ModalOverlay","modal","content","portalElement","document","getElementById","Modal","ReactDOM","createPortal","module","exports","Card","card","isNotEmpty","value","isNotNegetive","NewDishItemForm","useInput","item","name","nameValue","nameIsValid","isValid","nameHasError","hasError","nameChangeHandler","valueChangeHandler","nameBlurHandler","inputBlurHandler","resetName","reset","description","descriptionValue","descriptionIsValid","descriptionHasError","descriptionChangeHandler","descriptionBlurHandler","resetDescription","price","priceValue","priceIsValid","priceHasError","priceChangeHandler","priceBlurHandler","resetPrice","formIsValid","form","onSubmit","event","preventDefault","onConfirm","label","id","onChange","onBlur","errorStyling","invalid","min","step","actions","getStar","color","getStars","stars","parseFloat","toString","split","whole","part","i","push","RatingLogic","ratingValue","map","index","Rating","dishItemId","setRatingValue","fecthAllRatings","useEffect","ratingObjects","loadedRatings","key","rating","length","transformedValue","fractionValue","Math","abs","floor","ceil","transformRatings","Number","toFixed","DeleteDishItem","isModalOn","setIsModalOn","isDeleted","setIsDeleted","isDeleting","deleteError","deleteDishItemRequest","hideModalHandler","callDeleteState","deleteDishItemResponse","deleteById","confirmDeleteModal","showLoadingSpinner","LoadingSpinner","deleteSucceedModal","deleteErrorModal","DishItemActions","didUpdate","setDidUpdate","callDeleteComponent","setCallDeleteComponent","isUpdating","updateError","updateDishItemRequest","updateDishItemResponse","updatedDishItem","onUpdateItem","updateDishItemHandler","bind","updateFormModal","isUpdatingModal","didUpdateModal","errorUpdatingModal","deleteComponent","onDelete","DishItemForm","amountInputRef","useRef","amountIsValid","setAmountIsValid","enteredAmount","current","enteredAmountNumber","trim","onAddToCart","input","htmlFor","ref","max","defaultValue","DishItem","itemState","setItemState","location","useLocation","adminUrl","test","pathname","cartCtx","useContext","CartContext","dishItem","dish","to","updatedItem","onDeleteItem","amount","addItem","NewDishItem","isAdded","setIsAdded","isAdding","addError","addNewDishItemRequest","callNewDishState","addNewDishItemResponse","newDishItem","newDishItemData","generatedId","createdDishItem","onAddNewDishItem","console","log","creatNewDishHandler","addItemModal","addingItemModal","addedItemModal","errorAddingModal","AvailableDishes","availableDishes","setAvailableDishes","callNewDish","setCallNewDish","fetchAvailableDishes","dishObj","loadedDishes","deleteItemHandler","deletedId","newAvailableDishes","findIndex","availableDish","splice","dishesList","dishesLoading","fetchDishesError","addDishItemUI","addedNewItem","prevState","concat","dishes","AllDishes"],"mappings":"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","file":"static/js/5.1d1df3d9.chunk.js","sourcesContent":["import { useCallback, useState } from \"react\";\r\n\r\nconst useHttp = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const sendRequest = useCallback(async (requestConfig, applyData) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(requestConfig.url, {\r\n        method: requestConfig.method ? requestConfig.method : \"GET\",\r\n        headers: requestConfig.headers ? requestConfig.headers : {},\r\n        body: requestConfig.body ? JSON.stringify(requestConfig.body) : null,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Request failed!\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      applyData(data);\r\n    } catch (err) {\r\n      setError(err.message || \"Something went wrong!\");\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  return {\r\n    isLoading,\r\n    error,\r\n    sendRequest,\r\n  };\r\n};\r\n\r\nexport default useHttp;\r\n","import classes from \"./Button.module.css\";\r\n\r\nconst Button = (props) => {\r\n  const STYLES = [\r\n    \"button--submit\",\r\n    \"button--cancel\",\r\n    \"button--reset\",\r\n    \"button--edit\",\r\n    \"button--delete\",\r\n  ];\r\n\r\n  const buttonStyle = STYLES.includes(props.buttonStyle)\r\n    ? props.buttonStyle\r\n    : STYLES[0];\r\n\r\n  return (\r\n    <button\r\n      className={`${classes.button} ${classes[buttonStyle]}`}\r\n      // className={classes.button}\r\n      type={props.type || \"button\"}\r\n      onClick={props.onClick}\r\n      disabled={props.disabled || false}\r\n    >\r\n      {props.children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { Fragment } from \"react\";\r\nimport classes from \"./Modal.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nconst Backdrop = (props) => {\r\n  return <div className={classes.backdrop} onClick={props.onClose} />;\r\n};\r\n\r\nconst ModalOverlay = (props) => {\r\n  return (\r\n    <div className={classes.modal}>\r\n      <div className={classes.content}>{props.children}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst portalElement = document.getElementById(\"overlays\");\r\n\r\nconst Modal = (props) => {\r\n  return (\r\n    <Fragment>\r\n      {ReactDOM.createPortal(\r\n        <Backdrop onClose={props.onClose} />,\r\n        portalElement\r\n      )}\r\n      {ReactDOM.createPortal(\r\n        <ModalOverlay>{props.children}</ModalOverlay>,\r\n        portalElement\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actions\":\"DishItemActions_actions__2WXUm\",\"invalid\":\"DishItemActions_invalid__3QL1c\"};","import classes from \"./Card.module.css\";\r\n\r\nconst Card = (props) => {\r\n  return <div className={classes.card}>{props.children}</div>;\r\n};\r\n\r\nexport default Card;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dishes\":\"AvailableDishes_dishes__Csb6N\",\"dishes-appear\":\"AvailableDishes_dishes-appear__3Pufg\",\"dishesLoading\":\"AvailableDishes_dishesLoading__c-p27\",\"fetchDishesError\":\"AvailableDishes_fetchDishesError__svuCw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2jVP6\",\"button--cancel\":\"Button_button--cancel__lkgVB\",\"button--reset\":\"Button_button--reset__1xpYZ\",\"button--submit\":\"Button_button--submit__c9QIc\",\"button--edit\":\"Button_button--edit__2Td8g\",\"button--delete\":\"Button_button--delete__1_Zsw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__YEWXs\"};","import useInput from \"../../../hooks/use-input\";\r\nimport Button from \"../../UI/FormFields/Button\";\r\nimport Input from \"../../UI/FormFields/Input\";\r\nimport classes from \"./NewDishItemForm.module.css\";\r\n\r\n// some validation rules\r\nconst isNotEmpty = (value) => value !== \"\";\r\nconst isNotNegetive = (value) => value > 0;\r\n\r\nconst NewDishItemForm = (props) => {\r\n  const {\r\n    value: nameValue,\r\n    isValid: nameIsValid,\r\n    hasError: nameHasError,\r\n    valueChangeHandler: nameChangeHandler,\r\n    inputBlurHandler: nameBlurHandler,\r\n    reset: resetName,\r\n  } = useInput(isNotEmpty, props.item ? props.item.name : \"\");\r\n\r\n  const {\r\n    value: descriptionValue,\r\n    isValid: descriptionIsValid,\r\n    hasError: descriptionHasError,\r\n    valueChangeHandler: descriptionChangeHandler,\r\n    inputBlurHandler: descriptionBlurHandler,\r\n    reset: resetDescription,\r\n  } = useInput(isNotEmpty, props.item ? props.item.description : \"\");\r\n\r\n  const {\r\n    value: priceValue,\r\n    isValid: priceIsValid,\r\n    hasError: priceHasError,\r\n    valueChangeHandler: priceChangeHandler,\r\n    inputBlurHandler: priceBlurHandler,\r\n    reset: resetPrice,\r\n  } = useInput(isNotNegetive, props.item ? props.item.price : \"\");\r\n\r\n  // Check if all the inputs are valid\r\n  let formIsValid = false;\r\n  if (nameIsValid && descriptionIsValid && priceIsValid) {\r\n    formIsValid = true;\r\n  }\r\n\r\n  const formSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    if (!formIsValid) {\r\n      return;\r\n    }\r\n\r\n    props.onConfirm({\r\n      name: nameValue,\r\n      description: descriptionValue,\r\n      price: priceValue,\r\n    });\r\n  };\r\n\r\n  const resetHandler = () => {\r\n    resetDescription();\r\n    resetName();\r\n    resetPrice();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form className={classes.form} onSubmit={formSubmitHandler}>\r\n        <Input\r\n          label=\"Name\"\r\n          id=\"name\"\r\n          type=\"text\"\r\n          value={nameValue}\r\n          onChange={nameChangeHandler}\r\n          onBlur={nameBlurHandler}\r\n          errorStyling={nameHasError}\r\n        />\r\n        {nameHasError && (\r\n          <p className={classes.invalid}>Please enter a valid name!</p>\r\n        )}\r\n        <Input\r\n          label=\"Description\"\r\n          id=\"description\"\r\n          type=\"textarea\"\r\n          value={descriptionValue}\r\n          onChange={descriptionChangeHandler}\r\n          onBlur={descriptionBlurHandler}\r\n          errorStyling={descriptionHasError}\r\n        />\r\n        {descriptionHasError && (\r\n          <p className={classes.invalid}>Please enter a valid name!</p>\r\n        )}\r\n        <Input\r\n          label=\"Price\"\r\n          id=\"price\"\r\n          type=\"number\"\r\n          min=\"1\"\r\n          step=\"any\"\r\n          value={priceValue}\r\n          onChange={priceChangeHandler}\r\n          onBlur={priceBlurHandler}\r\n          errorStyling={priceHasError}\r\n        />\r\n        {priceHasError && (\r\n          <p className={classes.invalid}>Please enter a valid name!</p>\r\n        )}\r\n        <div className={classes.actions}>\r\n          <Button buttonStyle=\"button--reset\" onClick={resetHandler}>\r\n            Reset\r\n          </Button>\r\n          <Button\r\n            buttonStyle=\"button--edit\"\r\n            type=\"submit\"\r\n            disabled={!formIsValid}\r\n          >\r\n            {props.item ? \"Update\" : \"Add New Dish\"}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewDishItemForm;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"NewDishItemForm_form__W9czV\",\"actions\":\"NewDishItemForm_actions__1xZvE\",\"invalid\":\"NewDishItemForm_invalid__3k6oU\"};","import { Fragment } from \"react\";\r\nimport { FaStar, FaStarHalfAlt } from \"react-icons/fa\";\r\n\r\nconst getStar = (value) => {\r\n  switch (value) {\r\n    case 0:\r\n      return <FaStar color=\"grey\" />;\r\n    case 50:\r\n      return <FaStarHalfAlt color=\"orange\" />;\r\n    case 100:\r\n      return <FaStar color=\"orange\" />;\r\n\r\n    default:\r\n      return;\r\n  }\r\n};\r\n\r\nconst getStars = (value) => {\r\n  const stars = [];\r\n  const [whole, part] = parseFloat(value).toString().split(\".\");\r\n\r\n  for (let i = 0; i < whole; i++) {\r\n    stars.push(100);\r\n  }\r\n  if (part) {\r\n    stars.push(50);\r\n  }\r\n  for (let i = whole; i < (part ? 4 : 5); i++) {\r\n    stars.push(0);\r\n  }\r\n\r\n  return stars;\r\n};\r\n\r\nconst RatingLogic = ({ ratingValue }) => {\r\n  return (\r\n    <Fragment>\r\n      {getStars(ratingValue).map((value, index) => (\r\n        <span key={index}>{getStar(value)}</span>\r\n      ))}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default RatingLogic;\r\n","import { useEffect, useState } from \"react\";\r\nimport useHttp from \"../../hooks/use-http\";\r\nimport RatingLogic from \"./RatingLogic\";\r\n\r\nconst Rating = ({ dishItemId }) => {\r\n  const [ratingValue, setRatingValue] = useState(0);\r\n\r\n  const { sendRequest: fecthAllRatings } = useHttp();\r\n\r\n  const transformRatings = (value) => {\r\n    let fractionValue = Math.abs(value) - Math.floor(value);\r\n    if (fractionValue >= 0 && fractionValue < 0.26) {\r\n      value = Math.floor(value);\r\n    } else if (fractionValue > 0.75 && fractionValue < 1) {\r\n      value = Math.ceil(value);\r\n    } else {\r\n      value = Math.floor(value) + 0.5;\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getRatings = (ratingObjects) => {\r\n      const loadedRatings = [];\r\n\r\n      let value = 0;\r\n      for (const key in ratingObjects) {\r\n        loadedRatings.push(ratingObjects[key].rating);\r\n        value += ratingObjects[key].rating;\r\n      }\r\n\r\n      if (loadedRatings.length > 0) {\r\n        const transformedValue = transformRatings(\r\n          Number(value / loadedRatings.length).toFixed(2)\r\n        );\r\n\r\n        setRatingValue(transformedValue);\r\n      }\r\n    };\r\n\r\n    fecthAllRatings(\r\n      {\r\n        url: `https://mensa-app-80da4-default-rtdb.firebaseio.com/reviews/${dishItemId}.json`,\r\n      },\r\n      getRatings\r\n    );\r\n  }, [dishItemId, fecthAllRatings]);\r\n\r\n  //   console.log(\"Rating: \", ratingValue);\r\n\r\n  return <RatingLogic ratingValue={ratingValue} />;\r\n};\r\n\r\nexport default Rating;\r\n","import { Fragment, useState } from \"react\";\r\nimport useHttp from \"../../../hooks/use-http\";\r\nimport Button from \"../../UI/FormFields/Button\";\r\nimport LoadingSpinner from \"../../UI/LoadingSpinner\";\r\nimport Modal from \"../../UI/Modal\";\r\nimport classes from \"./DishItemActions.module.css\";\r\n\r\nconst DeleteDishItem = (props) => {\r\n  const [isModalOn, setIsModalOn] = useState(true);\r\n  const [isDeleted, setIsDeleted] = useState(false);\r\n\r\n  // Destructuring from useHttp custom hook for processing post request (send data)\r\n  const {\r\n    isLoading: isDeleting,\r\n    error: deleteError,\r\n    sendRequest: deleteDishItemRequest,\r\n  } = useHttp();\r\n\r\n  const hideModalHandler = () => {\r\n    setIsModalOn(false);\r\n    setIsDeleted(false);\r\n    props.callDeleteState(false);\r\n  };\r\n  //   console.log(\"isModalOn from DeleteDishItem: \", isModalOn);\r\n\r\n  const deleteDishItemResponse = () => {\r\n    setIsDeleted(true);\r\n    // state up to its' parent components -- up to AvailableDishes component\r\n    props.deleteById(props.id);\r\n  };\r\n\r\n  const deleteDishItemHandler = () => {\r\n    deleteDishItemRequest(\r\n      {\r\n        url: `https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes/${props.id}.json`,\r\n        method: \"DELETE\",\r\n      },\r\n      deleteDishItemResponse\r\n    );\r\n  };\r\n\r\n  // Delete confirmation - not yet deleted\r\n  const confirmDeleteModal = (\r\n    <Fragment>\r\n      <p>Are you sure! You want to delete this dish item!</p>\r\n      <div className={classes.actions}>\r\n        <Button buttonStyle=\"button--cancel\" onClick={hideModalHandler}>\r\n          Cancel\r\n        </Button>\r\n        <Button buttonStyle=\"button--delete\" onClick={deleteDishItemHandler}>\r\n          Confirm\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  // immidiately after sending the request\r\n  const showLoadingSpinner = (\r\n    <div className=\"centered\">\r\n      <LoadingSpinner />\r\n    </div>\r\n  );\r\n\r\n  // deleted successfully - show a success message\r\n  const deleteSucceedModal = (\r\n    <Fragment>\r\n      <p>\r\n        The Dish item has been deleted successfully!Reload the page to see the\r\n        changes!\r\n      </p>\r\n      <div className={classes.actions}>\r\n        <Button buttonStyle=\"button--cancel\" onClick={hideModalHandler}>\r\n          Close\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  const deleteErrorModal = (\r\n    <div className={classes.actions}>\r\n      <p className={classes.invalid}>{deleteError}</p>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {isModalOn && (\r\n        <Modal onClose={hideModalHandler}>\r\n          {!isDeleted && !isDeleting && !deleteError && confirmDeleteModal}\r\n          {isDeleting && showLoadingSpinner}\r\n          {isDeleted && !isDeleting && deleteSucceedModal}\r\n          {deleteError && deleteErrorModal}\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteDishItem;\r\n","import { Fragment, useState } from \"react\";\r\nimport useHttp from \"../../../hooks/use-http\";\r\nimport Button from \"../../UI/FormFields/Button\";\r\nimport LoadingSpinner from \"../../UI/LoadingSpinner\";\r\nimport Modal from \"../../UI/Modal\";\r\n\r\nimport classes from \"./DishItemActions.module.css\";\r\nimport DeleteDishItem from \"./DeleteDishItem\";\r\nimport NewDishItemForm from \"./NewDishItemForm\";\r\n\r\nconst DishItemActions = (props) => {\r\n  const [isModalOn, setIsModalOn] = useState(false);\r\n  const [didUpdate, setDidUpdate] = useState(false);\r\n  const [callDeleteComponent, setCallDeleteComponent] = useState(false);\r\n\r\n  const {\r\n    isLoading: isUpdating,\r\n    error: updateError,\r\n    sendRequest: updateDishItemRequest,\r\n  } = useHttp();\r\n\r\n  const showUpdateModal = () => {\r\n    setIsModalOn(true);\r\n  };\r\n\r\n  const hideModalHandler = () => {\r\n    setIsModalOn(false);\r\n    setDidUpdate(false);\r\n  };\r\n\r\n  const updateDishItemResponse = (updatedDishItem) => {\r\n    setDidUpdate(true);\r\n    // pass the updated value for updating local state\r\n    props.onUpdateItem({\r\n      id: props.item.id,\r\n      name: updatedDishItem.name,\r\n      description: updatedDishItem.description,\r\n      price: updatedDishItem.price,\r\n    });\r\n  };\r\n\r\n  const updateDishItemHandler = async (updatedDishItem) => {\r\n    updateDishItemRequest(\r\n      {\r\n        url: `https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes/${props.item.id}.json`,\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: {\r\n          name: updatedDishItem.name,\r\n          description: updatedDishItem.description,\r\n          price: +updatedDishItem.price,\r\n        },\r\n      },\r\n      updateDishItemResponse.bind(null, updatedDishItem) // bind() => for pre-configuration\r\n    );\r\n  };\r\n\r\n  // To show the update form in the modal. re-use the NewDishItemForm Component\r\n  const updateFormModal = (\r\n    <Fragment>\r\n      <NewDishItemForm item={props.item} onConfirm={updateDishItemHandler} />\r\n      <div className={classes.actions}>\r\n        <Button buttonStyle=\"button--cancel\" onClick={hideModalHandler}>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  // immidiately after sending the request\r\n  const isUpdatingModal = (\r\n    <div className=\"centered\">\r\n      <LoadingSpinner />\r\n    </div>\r\n  );\r\n\r\n  // When the request is sent successfully\r\n  const didUpdateModal = (\r\n    <Fragment>\r\n      <p>\r\n        The Dish item is updated successfully! Reload the page to see changes!\r\n      </p>\r\n      <div className={classes.actions}>\r\n        <Button buttonStyle=\"button--cancel\" onClick={hideModalHandler}>\r\n          Close\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  const errorUpdatingModal = (\r\n    <div className={classes.actions}>\r\n      <p className={classes.invalid}>{updateError}</p>\r\n    </div>\r\n  );\r\n\r\n  const deleteDishItem = () => {\r\n    setCallDeleteComponent(true);\r\n  };\r\n  //   console.log(\"callDeleteC. - deleteDishItem: \", callDeleteComponent);\r\n\r\n  // render the delete component with state\r\n  const deleteComponent = (\r\n    <DeleteDishItem\r\n      id={props.item.id}\r\n      callDeleteState={setCallDeleteComponent}\r\n      // one state up to its' parent component\r\n      deleteById={props.onDelete}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button buttonStyle=\"button--edit\" onClick={showUpdateModal}>\r\n        Update\r\n      </Button>\r\n      <Button buttonStyle=\"button--delete\" onClick={deleteDishItem}>\r\n        Delete\r\n      </Button>\r\n      {isModalOn && (\r\n        <Modal onClose={hideModalHandler}>\r\n          {!isUpdating && !didUpdate && updateFormModal}\r\n          {isUpdating && isUpdatingModal}\r\n          {!isUpdating && didUpdate && didUpdateModal}\r\n          {updateError && errorUpdatingModal}\r\n        </Modal>\r\n      )}\r\n      {callDeleteComponent && deleteComponent}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default DishItemActions;\r\n","import { useRef, useState } from \"react\";\r\nimport Button from \"../../UI/FormFields/Button\";\r\nimport classes from \"./DishItemForm.module.css\";\r\n\r\nconst DishItemForm = (props) => {\r\n  const amountInputRef = useRef();\r\n\r\n  const [amountIsValid, setAmountIsValid] = useState(true);\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    const enteredAmount = amountInputRef.current.value;\r\n    const enteredAmountNumber = +enteredAmount; // convert a string to a number\r\n\r\n    if (\r\n      enteredAmount.trim().length === 0 ||\r\n      enteredAmountNumber < 1 ||\r\n      enteredAmountNumber > 5\r\n    ) {\r\n      setAmountIsValid(false);\r\n      return;\r\n    }\r\n    props.onAddToCart(enteredAmountNumber);\r\n  };\r\n\r\n  return (\r\n    <form className={classes.form} onSubmit={submitHandler}>\r\n      <div className={classes.input}>\r\n        <label htmlFor={props.id}>Amount</label>\r\n        <input\r\n          id={`amount_${props.id}`}\r\n          ref={amountInputRef}\r\n          type=\"number\"\r\n          min=\"1\"\r\n          max=\"5\"\r\n          step=\"1\"\r\n          defaultValue=\"1\"\r\n        />\r\n      </div>\r\n      <Button type=\"submit\">+ Add</Button>\r\n      {!amountIsValid && <p>Please enter a valid amount(1-5)</p>}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default DishItemForm;\r\n","import { useContext, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport CartContext from \"../../../store/cart-context\";\r\nimport Rating from \"../../Reviews/Rating\";\r\nimport classes from \"./DishItem.module.css\";\r\nimport DishItemActions from \"./DishItemActions\";\r\nimport DishItemForm from \"./DishItemForm\";\r\n\r\nconst DishItem = (props) => {\r\n  // state declaration to show update value in client site\r\n  const [itemState, setItemState] = useState({\r\n    id: props.id,\r\n    name: props.name,\r\n    price: props.price,\r\n    description: props.description,\r\n  });\r\n\r\n  const location = useLocation();\r\n  const urlPattern = /admin+\\W*/;\r\n  const adminUrl = urlPattern.test(location.pathname);\r\n\r\n  const price = `€${Number(itemState.price).toFixed(2)}`;\r\n\r\n  const cartCtx = useContext(CartContext);\r\n\r\n  const addToCartHandler = (amount) => {\r\n    cartCtx.addItem({\r\n      id: props.id,\r\n      name: props.name,\r\n      amount: amount,\r\n      price: props.price,\r\n    });\r\n  };\r\n\r\n  const dishItem = {\r\n    id: itemState.id,\r\n    name: itemState.name,\r\n    price: itemState.price,\r\n    description: itemState.description,\r\n  };\r\n\r\n  // update value in client site -- not in server site\r\n  const updateItemHandler = (updatedItem) => {\r\n    setItemState(updatedItem);\r\n  };\r\n\r\n  return (\r\n    <li className={classes.dish}>\r\n      <div>\r\n        {adminUrl ? (\r\n          <h3>{itemState.name}</h3>\r\n        ) : (\r\n          <Link to={`/dishes/${props.id}`}>\r\n            <h3>{itemState.name}</h3>\r\n          </Link>\r\n        )}\r\n        <div className={classes.description}>{itemState.description}</div>\r\n        <div className={classes.price}>{price}</div>\r\n        <Rating dishItemId={props.id} />\r\n      </div>\r\n      <div>\r\n        {adminUrl && (\r\n          <DishItemActions\r\n            item={dishItem}\r\n            onUpdateItem={updateItemHandler}\r\n            // one state up to its' parent component\r\n            onDelete={props.onDeleteItem}\r\n          />\r\n        )}\r\n        {!adminUrl && (\r\n          <DishItemForm id={props.id} onAddToCart={addToCartHandler} />\r\n        )}\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default DishItem;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__HtLmJ\",\"modal\":\"Modal_modal__2L3_b\",\"slide-down\":\"Modal_slide-down__19PJI\",\"content\":\"Modal_content__G3IwK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dish\":\"DishItem_dish__2Aya-\",\"description\":\"DishItem_description__2dLwp\",\"price\":\"DishItem_price__HVKAF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"DishItemForm_form__1ySFI\",\"input\":\"DishItemForm_input__HEXzg\"};","import { Fragment, useState } from \"react\";\r\nimport useHttp from \"../../../hooks/use-http\";\r\nimport Button from \"../../UI/FormFields/Button\";\r\nimport LoadingSpinner from \"../../UI/LoadingSpinner\";\r\nimport Modal from \"../../UI/Modal\";\r\nimport classes from \"./DishItemActions.module.css\";\r\nimport NewDishItemForm from \"./NewDishItemForm\";\r\n\r\nconst NewDishItem = (props) => {\r\n  const [isModalOn, setIsModalOn] = useState(true);\r\n  const [isAdded, setIsAdded] = useState(false);\r\n\r\n  const {\r\n    isLoading: isAdding,\r\n    error: addError,\r\n    sendRequest: addNewDishItemRequest,\r\n  } = useHttp();\r\n\r\n  const hideModalHandler = () => {\r\n    setIsModalOn(false);\r\n    setIsAdded(false);\r\n    props.callNewDishState(false);\r\n  };\r\n\r\n  const addNewDishItemResponse = (newDishItem, newDishItemData) => {\r\n    setIsAdded(true);\r\n    const generatedId = newDishItemData.name; // firebase-specific => \"name\" contains generated id\r\n    const createdDishItem = {\r\n      id: generatedId,\r\n      name: newDishItem.name,\r\n      description: newDishItem.description,\r\n      price: newDishItem.price,\r\n    };\r\n    props.onAddNewDishItem(createdDishItem);\r\n    console.log(generatedId);\r\n  };\r\n\r\n  const creatNewDishHandler = async (newDishItem) => {\r\n    addNewDishItemRequest(\r\n      {\r\n        url: \"https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes.json\",\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: {\r\n          name: newDishItem.name,\r\n          description: newDishItem.description,\r\n          price: newDishItem.price,\r\n        },\r\n      },\r\n      addNewDishItemResponse.bind(null, newDishItem) // bind() => for pre-configuration\r\n    );\r\n  };\r\n\r\n  // To show the insert form in the modal\r\n  const addItemModal = (\r\n    <Fragment>\r\n      <NewDishItemForm onConfirm={creatNewDishHandler} />\r\n      <div className={classes.actions}>\r\n        <Button buttonStyle=\"button--cancel\" onClick={hideModalHandler}>\r\n          Close\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  // immidiately after sending the request\r\n  const addingItemModal = (\r\n    <div className=\"centered\">\r\n      <LoadingSpinner />\r\n    </div>\r\n  );\r\n\r\n  // When the request is sent successfully\r\n  const addedItemModal = (\r\n    <Fragment>\r\n      <p>\r\n        A New Dish Item is added successfully! Reload the page to see changes!\r\n      </p>\r\n      <div className={classes.actions}>\r\n        <Button buttonStyle=\"button--cancel\" onClick={hideModalHandler}>\r\n          Close\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  const errorAddingModal = (\r\n    <div className={classes.actions}>\r\n      <p className={classes.invalid}>{addError}</p>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {isModalOn && (\r\n        <Modal onClose={hideModalHandler}>\r\n          {!isAdding && !isAdded && addItemModal}\r\n          {isAdding && addingItemModal}\r\n          {!isAdding && isAdded && addedItemModal}\r\n          {addError && errorAddingModal}\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewDishItem;\r\n","import { useState, useEffect, Fragment } from \"react\";\r\nimport useHttp from \"../../hooks/use-http\";\r\nimport Card from \"../UI/Card\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\n\r\nimport NewDishItem from \"../../components/Dishes/DishItem/NewDishItem\";\r\nimport classes from \"./AvailableDishes.module.css\";\r\nimport DishItem from \"./DishItem/DishItem\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst AvailableDishes = () => {\r\n  const [availableDishes, setAvailableDishes] = useState([]);\r\n  const [callNewDish, setCallNewDish] = useState(false);\r\n\r\n  const location = useLocation();\r\n  const urlPattern = /admin+\\W*/;\r\n  const adminUrl = urlPattern.test(location.pathname);\r\n\r\n  // Destructuring from useHttp custom hook for processing get request (fetch data)\r\n  const { isLoading, error, sendRequest: fetchAvailableDishes } = useHttp();\r\n\r\n  useEffect(() => {\r\n    const transformDishes = (dishObj) => {\r\n      const loadedDishes = [];\r\n\r\n      for (const key in dishObj) {\r\n        loadedDishes.push({\r\n          id: key,\r\n          name: dishObj[key].name,\r\n          description: dishObj[key].description,\r\n          price: dishObj[key].price,\r\n        });\r\n      }\r\n      setAvailableDishes(loadedDishes);\r\n    };\r\n\r\n    fetchAvailableDishes(\r\n      {\r\n        url: \"https://mensa-app-80da4-default-rtdb.firebaseio.com/dishes.json\",\r\n      },\r\n      transformDishes\r\n    );\r\n  }, [fetchAvailableDishes]);\r\n\r\n  const deleteItemHandler = (deletedId) => {\r\n    const newAvailableDishes = [...availableDishes];\r\n    const index = availableDishes.findIndex(\r\n      (availableDish) => availableDish.id === deletedId\r\n    );\r\n    newAvailableDishes.splice(index, 1);\r\n    setAvailableDishes(newAvailableDishes);\r\n  };\r\n\r\n  const dishesList = availableDishes.map((dish) => (\r\n    <DishItem\r\n      id={dish.id}\r\n      key={dish.id}\r\n      name={dish.name}\r\n      description={dish.description}\r\n      price={dish.price}\r\n      onDeleteItem={deleteItemHandler}\r\n    />\r\n  ));\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <section className={classes.dishesLoading}>\r\n        <LoadingSpinner />\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <section className={classes.fetchDishesError}>\r\n        <p>{error}</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  const newDishCompHandler = () => {\r\n    setCallNewDish(true);\r\n  };\r\n\r\n  const newDishItemAddedHandler = (addedNewItem) => {\r\n    setAvailableDishes((prevState) => prevState.concat(addedNewItem));\r\n  };\r\n\r\n  // In order to show add item form\r\n  const addDishItemUI = (\r\n    <Fragment>\r\n      {callNewDish && (\r\n        <NewDishItem\r\n          onAddNewDishItem={newDishItemAddedHandler}\r\n          callNewDishState={setCallNewDish}\r\n        />\r\n      )}\r\n      <div className=\"centered\">\r\n        <button\r\n          className=\"uni-button\"\r\n          type=\"button\"\r\n          onClick={newDishCompHandler}\r\n        >\r\n          Add a New Dish Item\r\n        </button>\r\n      </div>\r\n      <h2 className=\"centered\">All Available Dish Items</h2>\r\n    </Fragment>\r\n  );\r\n\r\n  return (\r\n    <Fragment>\r\n      {adminUrl && addDishItemUI}\r\n      <section className={classes.dishes}>\r\n        <Card>\r\n          <ul>{dishesList}</ul>\r\n        </Card>\r\n      </section>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default AvailableDishes;\r\n","import { Fragment } from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport AvailableDishes from \"../../components/Dishes/AvailableDishes\";\r\n\r\nconst AllDishes = () => {\r\n  return (\r\n    <Fragment>\r\n      <Helmet>\r\n        <title>Food Mensa - All Dish Items</title>\r\n        <meta name=\"description\" content=\"All available Dish items\" />\r\n      </Helmet>\r\n      <AvailableDishes />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default AllDishes;\r\n"],"sourceRoot":""}