(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[2],[,,,,,,,,,,,function(e,t,n){e.exports={auth:"AuthForm_auth__2JBom",actions:"AuthForm_actions__e6wsK",toggle:"AuthForm_toggle__z-O3F",invalid:"AuthForm_invalid__1QPXQ"}},,,,function(e,t,n){e.exports={button:"HeaderCartButton_button__bav88",icon:"HeaderCartButton_icon__1Z-jY",badge:"HeaderCartButton_badge__MhdS3",bump:"HeaderCartButton_bump__38RaN"}},function(e,t,n){"use strict";var a=n(1),i=n.n(a).a.createContext({items:[],totalAmount:0,cartIsVisible:!1,addItem:function(e){},removeItem:function(e){},clearCart:function(){},cartVisibility:function(){}});t.a=i},,function(e,t,n){e.exports={header:"Header_header__30HSL","header-fixed":"Header_header-fixed__3cJ-Z","main-image":"Header_main-image__1fCRQ"}},function(e,t,n){e.exports={nav:"AdminNav_nav__2tYF0",active:"AdminNav_active__NQtk8"}},function(e,t,n){"use strict";var a=n(6),i=n(1);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(i.useState)(t),c=Object(a.a)(n,2),r=c[0],o=c[1],s=Object(i.useState)(!1),l=Object(a.a)(s,2),u=l[0],d=l[1],j=e(r),m=!j&&u,b=function(e){o(e.target.value)},h=function(e){d(!0)},O=function(){o(""),d(!1)};return{value:r,isValid:j,hasError:m,valueChangeHandler:b,inputBlurHandler:h,reset:O}}},function(e,t,n){"use strict";n(1);var a=n(26),i=n.n(a),c=n(0);t.a=function(e){var t="".concat(i.a.control," ").concat(e.errorStyling?i.a.invalid:"");return Object(c.jsxs)("div",{className:t,children:[Object(c.jsx)("label",{htmlFor:e.id,children:e.label}),"textarea"===e.type&&Object(c.jsx)("textarea",{id:e.id,value:e.value,onChange:e.onChange,onBlur:e.onBlur}),"number"===e.type&&Object(c.jsx)("input",{id:e.id,type:e.type,value:e.value,onChange:e.onChange,onBlur:e.onBlur,min:e.min,step:e.step}),"textarea"!==e.type&&"number"!==e.type&&Object(c.jsx)("input",{id:e.id,type:e.type,value:e.value,onChange:e.onChange,onBlur:e.onBlur})]})}},,,function(e,t,n){e.exports={footer:"Footer_footer__3Isg-",content:"Footer_content__1KJdf"}},,function(e,t,n){e.exports={control:"Input_control__XVcu-",invalid:"Input_invalid__35Q5B"}},function(e,t,n){"use strict";var a=n(35),i=n.n(a),c=n(0);t.a=function(){return Object(c.jsx)("div",{className:i.a.spinner})}},,,,,,,,function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__3NKDv"}},,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a,i=n(29),c=n.n(i),r=n(9),o=(n(40),n(1)),s=n.n(o),l=n(3),u=n(24),d=n.n(u),j=n(0),m=function(){return Object(j.jsx)("footer",{className:d.a.footer,children:Object(j.jsx)("p",{className:d.a.content,children:"Copyright \u24b8 2022 Mensa. All rights reserved"})})},b=n(18),h=n.n(b),O=n.p+"static/media/meal.38e0808c.jpg",x=n(6),f=n(16),g=function(){return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(j.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},p=n(15),v=n.n(p),_=function(e){var t=Object(o.useContext)(f.a),n=t.items.reduce((function(e,t){return e+t.amount}),0),a=Object(o.useState)(!1),i=Object(x.a)(a,2),c=i[0],r=i[1],s="".concat(v.a.button," ").concat(c?v.a.bump:""),l=t.items;Object(o.useEffect)((function(){if(0!==l.length){r(!0);var e=setTimeout((function(){r(!1)}),300);return function(){clearTimeout(e)}}}),[l]);return Object(j.jsxs)("button",{className:s,onClick:function(){t.cartVisibility()},children:[Object(j.jsx)("span",{className:v.a.icon,children:Object(j.jsx)(g,{})}),Object(j.jsx)("span",{children:"Your Cart"}),Object(j.jsx)("span",{className:v.a.badge,children:n})]})},I=s.a.createContext({token:"",isLoggedIn:!1,login:function(e){},logout:function(){}}),C=function(e){var t=(new Date).getTime();return new Date(e).getTime()-t},y=function(e){var t,n=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expirationTime"),n=C(t);return n<=6e4?(localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),null):{token:e,duration:n}}();n&&(t=n.token);var i=Object(o.useState)(t),c=Object(x.a)(i,2),r=c[0],s=c[1],l=!!r,u=Object(o.useCallback)((function(){s(null),localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),a&&clearTimeout(a)}),[]);Object(o.useEffect)((function(){n&&(a=setTimeout(u,n.duration))}),[n,u]);var d={token:r,isLoggedIn:l,login:function(e,t){s(e),localStorage.setItem("token",e),localStorage.setItem("expirationTime",t);var n=C(t);a=setTimeout(u,n)},logout:u};return Object(j.jsx)(I.Provider,{value:d,children:e.children})},A=I,S=n(19),w=n.n(S),N=function(){var e=Object(o.useContext)(A),t=e.isLoggedIn;return Object(j.jsx)("nav",{className:w.a.nav,children:Object(j.jsxs)("ul",{children:[t&&Object(j.jsx)("li",{children:Object(j.jsx)(r.c,{activeClassName:w.a.active,to:"/admin/manage-orders",children:"Manage Orders"})}),t&&Object(j.jsx)("li",{children:Object(j.jsx)(r.c,{activeClassName:w.a.active,to:"/admin/all-dishes",children:"All Dishes"})}),t&&Object(j.jsx)("li",{children:Object(j.jsx)(r.c,{to:"/admin",onClick:function(){e.logout()},children:"Logout"})})]})})},V=function(e){var t=Object(l.h)(),n=/admin+\W*/.test(t.pathname);return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsxs)("header",{className:"".concat(h.a.header," ").concat(n?"":h.a["header-fixed"]),children:[Object(j.jsx)(r.b,{to:"/",children:Object(j.jsx)("h2",{children:"Mensa - Order Your Meal"})}),n&&Object(j.jsx)(N,{}),!n&&Object(j.jsx)(_,{})]}),!n&&Object(j.jsx)("div",{className:h.a["main-image"],children:Object(j.jsx)("img",{src:O,alt:"A dish of Buffe!"})})]})},k=function(e){return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsx)(V,{showCart:e.onShowCart}),Object(j.jsx)("main",{children:e.children}),Object(j.jsx)(m,{})]})},B=n(28),T=n(20),H=n(21),E=n(11),L=n.n(E),z=function(e){return e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},F=function(e){return""!==e.trim()&&e.trim().length>5},P=function(e){var t=Object(o.useState)(!0),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Object(T.a)(z),r=c.value,s=c.isValid,l=c.hasError,u=c.valueChangeHandler,d=c.inputBlurHandler,m=Object(T.a)(F),b=m.value,h=m.isValid,O=m.hasError,f=m.valueChangeHandler,g=m.inputBlurHandler,p=!1;s&&h&&(p=!0);return Object(j.jsxs)("section",{className:L.a.auth,children:[Object(j.jsx)("h1",{children:a?"Login":"Sign Up"}),Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n,i="AIzaSyC8h6pqOPTYrV8wlv817cMUgebofmZT46c";n=a?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(i):"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(i),e.onConfirm({email:r,password:b},n)},children:[Object(j.jsx)(H.a,{label:"Your Email",id:"email",type:"text",value:r,onChange:u,onBlur:d,errorStyling:l}),l&&Object(j.jsx)("p",{className:L.a.invalid,children:"Please enter a valid email!"}),Object(j.jsx)(H.a,{label:"Your Password",id:"password",type:"password",value:b,onChange:f,onBlur:g,errorStyling:O}),O&&Object(j.jsx)("p",{className:L.a.invalid,children:"Please enter a password at least 6 charecters!"}),Object(j.jsxs)("div",{className:L.a.actions,children:[Object(j.jsx)("button",{disabled:!p,children:a?"Login":"Create Account"}),Object(j.jsx)("button",{type:"button",className:L.a.toggle,onClick:function(){i((function(e){return!e}))},children:a?"Create new account":"Login with existing account"}),e.authError&&Object(j.jsx)("p",{className:L.a.invalid,children:e.authError})]})]})]})},M=function(){var e=Object(l.g)(),t=Object(o.useState)(),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Object(o.useContext)(A);return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsxs)(B.a,{children:[Object(j.jsx)("title",{children:"Food Mensa - Admin Authentication"}),Object(j.jsx)("meta",{name:"description",content:"Admin Authentication"})]}),Object(j.jsx)(P,{authError:a,onConfirm:function(t,n){fetch(n,{method:"POST",body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0}),header:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new Error("Incorrect Email or Password!")}))})).then((function(t){var n=new Date((new Date).getTime()+1e3*+t.expiresIn);c.login(t.idToken,n.toISOString()),e.replace("/admin/manage-orders")})).catch((function(e){i(e.message)}))}})]})},D=n(27),Y=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,79))})),R=s.a.lazy((function(){return n.e(6).then(n.bind(null,80))})),J=s.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,76))})),Z=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,78))})),Q=s.a.lazy((function(){return n.e(9).then(n.bind(null,77))}));var K=function(){var e=Object(o.useContext)(A);return Object(j.jsx)(k,{children:Object(j.jsx)(o.Suspense,{fallback:Object(j.jsx)("div",{className:"centered",children:Object(j.jsx)(D.a,{})}),children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{path:"/",exact:!0,children:Object(j.jsx)(Y,{})}),Object(j.jsxs)(l.b,{path:"/admin",exact:!0,children:[!e.isLoggedIn&&Object(j.jsx)(M,{}),e.isLoggedIn&&Object(j.jsx)(R,{})]}),e.isLoggedIn&&Object(j.jsx)(l.b,{path:"/admin/manage-orders",children:Object(j.jsx)(R,{})}),e.isLoggedIn&&Object(j.jsx)(l.b,{path:"/admin/all-dishes",children:Object(j.jsx)(J,{})}),e.isLoggedIn&&Object(j.jsx)(l.b,{path:"/admin/*",children:Object(j.jsx)(Q,{})}),Object(j.jsx)(l.b,{path:"/dishes/:dishId",children:Object(j.jsx)(Z,{})}),Object(j.jsx)(l.b,{children:Object(j.jsx)(l.a,{to:"/"})})]})})})},U=n(23),W=n(14),X={items:[],totalAmount:0,cartIsVisible:!1},$=function(e,t){if("ADD"===t.type){var n,a=e.totalAmount+t.item.price*t.item.amount,i=e.items.findIndex((function(e){return e.id===t.item.id})),c=e.items[i];if(c){var r=Object(W.a)(Object(W.a)({},c),{},{amount:c.amount+t.item.amount});(n=Object(U.a)(e.items))[i]=r}else n=e.items.concat(t.item);return{items:n,totalAmount:a,cartIsVisible:e.cartIsVisible}}if("REMOVE"===t.type){var o,s=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[s],u=e.totalAmount-l.price;if(1===l.amount)o=e.items.filter((function(e){return e.id!==t.id}));else{var d=Object(W.a)(Object(W.a)({},l),{},{amount:l.amount-1});(o=Object(U.a)(e.items))[s]=d}return{items:o,totalAmount:u,cartIsVisible:e.cartIsVisible}}return"CLEAR"===t.type?{items:[],totalAmount:0,cartIsVisible:e.cartIsVisible}:"VISIBILITY"===t.type?{items:e.items,totalAmount:e.totalAmount,cartIsVisible:!e.cartIsVisible}:X},q=function(e){var t=Object(o.useReducer)($,X),n=Object(x.a)(t,2),a=n[0],i=n[1],c={items:a.items,totalAmount:a.totalAmount,cartIsVisible:a.cartIsVisible,addItem:function(e){i({type:"ADD",item:e})},removeItem:function(e){i({type:"REMOVE",id:e})},clearCart:function(){i({type:"CLEAR"})},cartVisibility:function(){i({type:"VISIBILITY"})}};return Object(j.jsx)(f.a.Provider,{value:c,children:e.children})};c.a.render(Object(j.jsx)(y,{children:Object(j.jsx)(q,{children:Object(j.jsx)(r.a,{children:Object(j.jsx)(K,{})})})}),document.getElementById("root"))}],[[49,3,4]]]);
//# sourceMappingURL=main.ce13f549.chunk.js.map